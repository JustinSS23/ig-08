<!DOCTYPE html>
<html>
  <head>
    <title>NBA Player Stats</title>
    <style>
      body {
        background-image: url('https://i.imgur.com/HJd3a7L.jpeg');
        background-size: cover;
        background-repeat: no-repeat;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        height: 100vh;
        margin: 0;
      }
      h1 {
        color: #f4f4f4;
        font-size: 48px;
        margin-top: 20px;
      }
      
      svg {
        width: 550px;
        height: 400px;
      }
    </style>
  </head>
  <body>
    <h1>NBA Player Stats</h1>
    <h2 style="color:white;">Average Stats From 2019 To 2022 Season</h2>
    <svg id="playerStats">
    </svg>
    <div>
      <button onclick="showPlayer(0)">Luka Doncic</button>
      <button onclick="showPlayer(1)">Donovan Mitchell</button>
      <button onclick="showPlayer(2)">Stephen Curry</button>
      <button onclick="showPlayer(3)">Jayson Tatum</button>
      <button onclick="showPlayer(4)">Joel Embiid</button>
    </div>
    
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
      const players = [
        {
          name: "Luka Doncic",
          seasons: [
            { GP: 72, points: 33.8, REB: 10.4, AST: 9.4, STL: 1.0, BLK: 0.6, FGM: 11.4, FTM: 10.1, TOV: 4.4 },
            { GP: 70, points: 30.8, REB: 9.4, AST: 8.4, STL: 0.9, BLK: 0.5, FGM: 10.3, FTM: 9.2, TOV: 4.1 },
            { GP: 65, points: 29.8, REB: 9.0, AST: 8.2, STL: 0.8, BLK: 0.4, FGM: 9.8, FTM: 8.5, TOV: 4.0 },
          ],
        },
        {
          name: "Donovan Mitchell",
          seasons: [
            { GP: 73, points: 32.8, REB: 5.4, AST: 5.4, STL: 1.2, BLK: 0.3, FGM: 11.2, FTM: 9.1, TOV: 3.9 },
            { GP: 71, points: 31.8, REB: 5.1, AST: 4.9, STL: 1.1, BLK: 0.2, FGM: 10.9, FTM: 8.7, TOV: 3.8 },
            { GP: 68, points: 30.5, REB: 4.8, AST: 5.1, STL: 1.0, BLK: 0.3, FGM: 10.3, FTM: 7.8, TOV: 3.6 },
          ],
        },
        {
          name: "Stephen Curry",
          seasons: [
            { GP: 74, points: 30.8, REB: 5.7, AST: 4.3, STL: 1.4, BLK: 0.2, FGM: 11.5, FTM: 9.6, TOV: 3.7 },
            { GP: 72, points: 29.6, REB: 5.4, AST: 4.7, STL: 1.3, BLK: 0.3, FGM: 10.9, FTM: 8.8, TOV: 3.5 },
            { GP: 70, points: 31.0, REB: 5.8, AST: 5.0, STL: 1.6, BLK: 0.4, FGM: 11.8, FTM: 9.4, TOV: 3.9 },
          ],
        },
        {
          name: "Jayson Tatum",
          seasons: [
            { GP: 71, points: 30.2, REB: 9.6, AST: 3.4, STL: 1.0, BLK: 0.9, FGM: 10.1, FTM: 9.5, TOV: 3.6 },
            { GP: 69, points: 29.0, REB: 9.1, AST: 3.5, STL: 0.9, BLK: 0.8, FGM: 9.8, FTM: 8.9, TOV: 3.5 },
            { GP: 67, points: 28.7, REB: 9.0, AST: 3.7, STL: 0.8, BLK: 0.7, FGM: 9.5, FTM: 8.6, TOV: 3.8 },
          ],
        },
        {
          name: "Joel Embiid",
          seasons: [
            { GP: 72, points: 29.4, REB: 11.0, AST: 6.2, STL: 1.1, BLK: 1.3, FGM: 11.0, FTM: 8.4, TOV: 3.3 },
            { GP: 70, points: 28.7, REB: 10.9, AST: 6.4, STL: 1.0, BLK: 1.2, FGM: 10.5, FTM: 8.2, TOV: 3.5 },
            { GP: 68, points: 30.1, REB: 11.4, AST: 6.6, STL: 1.2, BLK: 1.4, FGM: 11.5, FTM: 8.6, TOV: 3.4 },
          ],
        },
      ];

      let currentPlayerIndex = 0;

      function createPlayerStats(playerIndex) {
        const svg = d3.select('#playerStats');
        const barHeight = 20;
        const barSpacing = 30;

        svg.selectAll('*').remove();

        const player = players[playerIndex];
        svg.append('text')
          .attr('x', 20)
          .attr('y', 40)
          .attr('font-size', 20)
          .attr('fill', 'white')
          .text(player.name);

        const averageStats = calculateAverageStats(player);

        svg.selectAll('rect')
          .data(Object.entries(averageStats))
          .enter()
          .append('rect')
          .attr('x', 100)
          .attr('y', (d, i) => 70 + i * barSpacing)
          .attr('width', (d) => d[1] * 5)
          .attr('height', barHeight)
          .attr('fill', 'white');

        svg.selectAll('text.bar-label')
          .data(Object.keys(averageStats))
          .enter()
          .append('text')
          .attr('class', 'bar-label')
          .attr('x', 95)
          .attr('y', (d, i) => 82 + i * barSpacing)
          .attr('text-anchor', 'end')
          .attr('font-size', 16)
          .attr('fill', 'white')
          .text((d) => d);

        svg.selectAll('text.bar-value')
          .data(Object.values(averageStats))
          .enter()
          .append('text')
          .attr('class', 'bar-value')
          .attr('x', (d) => 110 + d * 5)
          .attr('y', (d, i) => 82 + i * barSpacing)
          .attr('font-size', 16)
          .attr('fill', 'red')
          .text((d) => d.toFixed(1));
      }
      function calculateAverageStats(player) {
        const totalStats = player.seasons.reduce((acc, season) => {
          for (const key in season) {
            if (acc.hasOwnProperty(key)) {
              acc[key] += season[key];
            }
          }
          return acc;
        }, { GP: 0, points: 0, REB: 0, AST: 0, STL: 0, BLK: 0, FGM: 0, FTM: 0, TOV: 0, EFF: 0 });

        const numSeasons = player.seasons.length;
        for (const key in totalStats) {
          totalStats[key] /= numSeasons;
        }

        return totalStats;
      }
      function showPlayer(playerIndex) {
        currentPlayerIndex = playerIndex;
        createPlayerStats(currentPlayerIndex);
      }
      showPlayer(currentPlayerIndex);
    </script>
  </body>
</html>
